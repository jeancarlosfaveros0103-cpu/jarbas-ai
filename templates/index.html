<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Jarbas AI</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="orb"></div>

<div id="chat">
    <input id="msg" placeholder="Fale com o Jarbas...">
    <button onclick="enviar()">âž¤</button>
</div>

<script>
const orb = document.getElementById("orb");
const msg = document.getElementById("msg");

let animando = false;
let frameId = null;

// ðŸŽ§ animaÃ§Ã£o estilo â€œvolumeâ€
function animarVolume() {
    if (!animando) return;

    // variaÃ§Ã£o suave (simula intensidade da voz)
    const volume = 1 + Math.sin(Date.now() / 120) * 0.15 + Math.random() * 0.05;
    orb.style.transform = `scale(${volume})`;

    frameId = requestAnimationFrame(animarVolume);
}

function falar(texto) {
    if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
    }

    const voz = new SpeechSynthesisUtterance(texto);
    voz.lang = "pt-BR";
    voz.rate = 0.95;
    voz.pitch = 0.85;

    voz.onstart = () => {
        animando = true;
        animarVolume();
    };

    voz.onend = () => {
        animando = false;
        cancelAnimationFrame(frameId);
        orb.style.transform = "scale(1)";
    };

    speechSynthesis.speak(voz);
}

function enviar() {
    const texto = msg.value.trim();
    if (!texto) return;

    // resposta local (backend entra depois)
    falar("Mensagem recebida. Estou processando sua solicitaÃ§Ã£o.");

    msg.value = "";
}

// fala inicial
setTimeout(() => {
    falar("Jarbas inicializado. Pronto para interagir.");
}, 700);
</script>

</body>
</html>
