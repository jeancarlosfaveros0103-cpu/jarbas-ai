<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Jarbas AI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ONDAS -->
    <div id="waves">
        <span></span>
        <span></span>
        <span></span>
    </div>

    <!-- BOLINHA CENTRAL -->
    <div id="orb"></div>

    <!-- CHAT -->
    <div id="chat">
        <input 
            id="msg" 
            type="text" 
            placeholder="Fale com o Jarbas..."
            autocomplete="off"
        >
        <button onclick="enviar()">➤</button>
    </div>

    <!-- SCRIPT -->
    <script>
        function falar(texto) {
            const orb = document.getElementById("orb");
            const waves = document.getElementById("waves");

            // ativa animações
            orb.classList.add("pulse");
            waves.classList.add("active");

            // voz
            const voz = new SpeechSynthesisUtterance(texto);
            voz.lang = "pt-BR";
            voz.rate = 0.95;
            voz.pitch = 0.85;
            voz.volume = 1;

            // quando terminar de falar
            voz.onend = () => {
                orb.classList.remove("pulse");
                waves.classList.remove("active");
            };

            speechSynthesis.cancel();
            speechSynthesis.speak(voz);
        }

        function enviar() {
            const input = document.getElementById("msg");
            const texto = input.value.trim();
            if (!texto) return;

            // RESPOSTA DE TESTE (substitui depois pelo backend)
            const resposta = "Estou operacional. Como posso ajudar?";

            falar(resposta);
            input.value = "";
        }

        // ENTER para enviar
        document.getElementById("msg").addEventListener("keydown", function(e) {
            if (e.key === "Enter") {
                enviar();
            }
        });
    </script>

</body>
</html>
